<div class="card" style="margin-top: 50px;">
    <div class="card-header">
        <h1 id="tableLabel">Students - Task based approach</h1>
    </div>
    <div class="card-body">
        <p *ngIf="!students"><em>Loading...</em></p>
        <div>
            <button type="button" class="btn btn-primary" style="margin-right: 5px;" (click)="openAddStudentModal()">Register student
            </button>
            <button type="button" style="margin-right: 5px;" [hidden]="HighlightRow == undefined" class="btn btn-light"
                    (click)="updatePersonalInfo()">Edit personal information
            </button>
            <button type="button" [hidden]="HighlightRow == undefined" class="btn btn-link" (click)="unregisterStudent()">
                Unregister student
            </button>
        </div>

        <table class='table table-striped table-hover' aria-labelledby="tableLabel" *ngIf="students">
            <thead>
            <tr>
                <th>SSN</th>
                <th>Name</th>
                <th>Email</th>
                <th>First course</th>
                <th>Second course</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let student of students; let i = index" (click)="rowSelected(student, i)"
                [class.active]="i == HighlightRow">
                <td>{{ student?.ssn }}</td>
                <td>{{ student?.name }}</td>
                <td>{{ student?.email }}</td>
                <td>
                    <div *ngIf="student?.course1">
                        <div>{{ student?.course1 }}</div>
                        <div>{{ 'Grade: ' + student?.course1Grade }}</div>
                        <div>{{ 'Credits: ' + student?.course1Credits }}</div>
                        <button type="button" style="margin-right: 5px;" [hidden]="HighlightRow != i"
                                class="btn btn-light"
                                (click)="transferModal(student?.course1, student?.course1Grade, 0)">Transfer
                        </button>
                        <button type="button" style="margin-right: 5px;" [hidden]="HighlightRow != i"
                                class="btn btn-light"
                                (click)="disenrollModal(0)">Disenroll
                        </button>
                    </div>
                    <div *ngIf="!student?.course1">
                        <button type="button" style="margin-right: 5px;" [hidden]="HighlightRow != i"
                                class="btn btn-light"
                                (click)="enrollModal(student?.course1, student?.course1Grade)">Enroll
                        </button>
                    </div>
                </td>
                <td>
                    <div *ngIf="student?.course2">
                        <div>{{ student?.course2 }}</div>
                        <div>{{ 'Grade: ' + student?.course2Grade }}</div>
                        <div>{{ 'Credits: ' + student?.course2Credits }}</div>
                        <button type="button" style="margin-right: 5px;" [hidden]="HighlightRow != i"
                                class="btn btn-light"
                                (click)="transferModal(student?.course2, student?.course2Grade, 1)">Transfer
                        </button>
                        <button type="button" style="margin-right: 5px;" [hidden]="HighlightRow != i"
                                class="btn btn-light"
                                (click)="disenrollModal(1)">Disenroll
                        </button>
                    </div>
                    <div *ngIf="!student?.course2">
                        <button type="button" style="margin-right: 5px;" [hidden]="HighlightRow != i"
                                class="btn btn-light"
                                (click)="enrollModal(student?.course2, student?.course2Grade)">Enroll
                        </button>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
